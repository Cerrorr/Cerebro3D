---
description:
globs:
alwaysApply: false
---
# Code Review å·¥ä½œæµç¨‹è§„èŒƒ

## Critical Rules

- æ‰€æœ‰ä»£ç å¿…é¡»é€šè¿‡Code Reviewåæ‰èƒ½æäº¤åˆ°ä¸»åˆ†æ”¯
- è‡³å°‘éœ€è¦1-2ä¸ªå›¢é˜Ÿæˆå‘˜çš„å®¡æŸ¥æ‰¹å‡†æ‰èƒ½åˆå¹¶PR
- ä¸å…è®¸ç›´æ¥æ¨é€åˆ°main/masteråˆ†æ”¯
- å¿…é¡»ä½¿ç”¨Pull Request/Merge Requestè¿›è¡Œä»£ç æäº¤
- Reviewå¿…é¡»æ£€æŸ¥ä»£ç è´¨é‡ã€åŠŸèƒ½å®ç°ã€æµ‹è¯•è¦†ç›–ç‡
- CI/CDæ£€æŸ¥é€šè¿‡æ˜¯åˆå¹¶çš„å‰ç½®æ¡ä»¶
- å¤§å‹åŠŸèƒ½å¿…é¡»æ‹†åˆ†ä¸ºå°çš„å¯å®¡æŸ¥çš„PR
- æ‰€æœ‰Reviewè¯„è®ºå¿…é¡»å¾—åˆ°å›åº”å’Œè§£å†³
- è‡ªå·±ä¸èƒ½æ‰¹å‡†è‡ªå·±çš„PR
- ç´§æ€¥ä¿®å¤ä¹Ÿå¿…é¡»ç»è¿‡ç®€åŒ–çš„Reviewæµç¨‹

## Examples

<example>
  // Good - æ ‡å‡†çš„Pull Requestå·¥ä½œæµç¨‹
  
  // 1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
  git checkout -b feature/user-management-panel
  
  // 2. å¼€å‘å¹¶æäº¤ä»£ç 
  git add .
  git commit -m "feat: add user management panel with CRUD operations
  
  - Implement user list display with Ant Design Table
  - Add user creation form with validation
  - Add edit and delete functionality
  - Include unit tests with 90% coverage
  - Follow Redux state management patterns
  
  Closes #123"
  
  // 3. æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯
  git push origin feature/user-management-panel
  
  // 4. åˆ›å»ºPull Requestæ¨¡æ¿
  ## ğŸ¯ å˜æ›´æ¦‚è¿°
  æ·»åŠ ç”¨æˆ·ç®¡ç†é¢æ¿ï¼ŒåŒ…å«å®Œæ•´çš„CRUDåŠŸèƒ½
  
  ## ğŸ“‹ å˜æ›´æ¸…å•
  - [x] ç”¨æˆ·åˆ—è¡¨å±•ç¤ºï¼ˆä½¿ç”¨Ant Design Tableï¼‰
  - [x] ç”¨æˆ·åˆ›å»ºè¡¨å•ï¼ˆåŒ…å«éªŒè¯ï¼‰
  - [x] ç¼–è¾‘å’Œåˆ é™¤åŠŸèƒ½
  - [x] ReduxçŠ¶æ€ç®¡ç†é›†æˆ
  - [x] å•å…ƒæµ‹è¯•ï¼ˆè¦†ç›–ç‡90%+ï¼‰
  - [x] TypeScriptç±»å‹å®šä¹‰
  
  ## ğŸ§ª æµ‹è¯•
  - [x] å•å…ƒæµ‹è¯•é€šè¿‡
  - [x] é›†æˆæµ‹è¯•é€šè¿‡
  - [x] E2Eæµ‹è¯•é€šè¿‡
  - [x] æ‰‹åŠ¨æµ‹è¯•éªŒè¯
  
  ## ğŸ“¸ æˆªå›¾/æ¼”ç¤º
  [åŒ…å«åŠŸèƒ½æ¼”ç¤ºæˆªå›¾æˆ–GIF]
  
  ## ğŸ” Reviewé‡ç‚¹
  - ç”¨æˆ·æ•°æ®éªŒè¯é€»è¾‘
  - ReduxçŠ¶æ€æ›´æ–°æµç¨‹
  - é”™è¯¯å¤„ç†æœºåˆ¶
  - ç»„ä»¶å¯å¤ç”¨æ€§
  
  ## ğŸ“ å…¶ä»–è¯´æ˜
  - éµå¾ªç°æœ‰çš„ä»£ç è§„èŒƒ
  - ä¿æŒä¸šåŠ¡é€»è¾‘ä¸3Dä»£ç åˆ†ç¦»
  - ä½¿ç”¨Ant Designç»„ä»¶ä¿æŒUIä¸€è‡´æ€§

  // Good - Code Reviewæ£€æŸ¥æ¸…å•
  ## Code Reviewæ£€æŸ¥é¡¹
  
  ### ğŸ“‹ åŠŸèƒ½æ€§
  - [ ] åŠŸèƒ½æŒ‰éœ€æ±‚æ­£ç¡®å®ç°
  - [ ] è¾¹ç•Œæƒ…å†µå¤„ç†å®Œå–„
  - [ ] é”™è¯¯å¤„ç†æœºåˆ¶å®Œå¤‡
  - [ ] ç”¨æˆ·ä½“éªŒå‹å¥½
  
  ### ğŸ—ï¸ ä»£ç è´¨é‡
  - [ ] éµå¾ªé¡¹ç›®ä»£ç è§„èŒƒ
  - [ ] å‡½æ•°èŒè´£å•ä¸€ï¼Œå¯è¯»æ€§å¼º
  - [ ] å˜é‡å‘½åæ¸…æ™°æœ‰æ„ä¹‰
  - [ ] æ²¡æœ‰ä»£ç é‡å¤
  - [ ] å¤æ‚é€»è¾‘æœ‰æ³¨é‡Šè¯´æ˜
  
  ### ğŸ¯ æ¶æ„è®¾è®¡
  - [ ] ä¸šåŠ¡é€»è¾‘ä¸3Dä»£ç åˆ†ç¦»
  - [ ] ReduxçŠ¶æ€ç®¡ç†æ­£ç¡®ä½¿ç”¨
  - [ ] React Three Fiber Hookå°è£…åˆç†
  - [ ] ç»„ä»¶åˆ’åˆ†åˆç†ï¼Œå¤ç”¨æ€§å¥½
  
  ### ğŸ§ª æµ‹è¯•è´¨é‡
  - [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡â‰¥85%
  - [ ] æµ‹è¯•ç”¨ä¾‹è¦†ç›–ä¸»è¦åœºæ™¯
  - [ ] Mockä½¿ç”¨æ­£ç¡®
  - [ ] å¼‚æ­¥æµ‹è¯•å¤„ç†æ­£ç¡®
  
  ### ğŸ”§ æŠ€æœ¯è§„èŒƒ
  - [ ] TypeScriptç±»å‹å®šä¹‰å®Œæ•´
  - [ ] ä½¿ç”¨ç®­å¤´å‡½æ•°ä¼˜å…ˆ
  - [ ] Ant Designç»„ä»¶ä½¿ç”¨è§„èŒƒ
  - [ ] TailwindCSSæ ·å¼ä½¿ç”¨æ­£ç¡®
  
  ### ğŸ“¦ æ€§èƒ½å®‰å…¨
  - [ ] æ²¡æœ‰æ€§èƒ½ç“¶é¢ˆ
  - [ ] å†…å­˜æ³„æ¼é£é™©æ’æŸ¥
  - [ ] å®‰å…¨æ¼æ´æ£€æŸ¥
  - [ ] ä¾èµ–ç‰ˆæœ¬åˆç†

  // Good - GitHubåˆ†æ”¯ä¿æŠ¤è§„åˆ™é…ç½®
  {
    "required_status_checks": {
      "strict": true,
      "contexts": [
        "ci/tests",
        "ci/lint", 
        "ci/type-check",
        "ci/coverage"
      ]
    },
    "enforce_admins": true,
    "required_pull_request_reviews": {
      "required_approving_review_count": 2,
      "dismiss_stale_reviews": true,
      "require_code_owner_reviews": true,
      "require_last_push_approval": true
    },
    "restrictions": {
      "users": [],
      "teams": ["core-developers"]
    },
    "allow_force_pushes": false,
    "allow_deletions": false
  }

  // Good - CODEOWNERSæ–‡ä»¶
  # Global owners
  * @team-lead @senior-dev
  
  # Frontend/UI changes
  /src/components/ @frontend-team
  /src/ui/ @ui-specialist
  
  # 3D/Three.js changes  
  /src/three/ @3d-specialist
  /src/hooks/use*3D* @3d-specialist
  
  # Redux/State management
  /src/store/ @state-management-expert
  /src/slices/ @state-management-expert
  
  # Testing
  **/*.test.ts @testing-specialist
  **/*.test.tsx @testing-specialist
  
  # Configuration
  /.github/ @devops-team
  /config/ @devops-team

  // Good - Git Hooksé…ç½® (pre-push)
  #!/bin/sh
  
  echo "ğŸ” Running pre-push checks..."
  
  # è¿è¡Œæµ‹è¯•
  echo "ğŸ“ Running tests..."
  npm test -- --coverage --watchAll=false
  if [ $? -ne 0 ]; then
    echo "âŒ Tests failed. Push aborted."
    exit 1
  fi
  
  # æ£€æŸ¥è¦†ç›–ç‡
  echo "ğŸ“Š Checking test coverage..."
  npm run test:coverage-check
  if [ $? -ne 0 ]; then
    echo "âŒ Coverage below 85%. Push aborted."
    exit 1
  fi
  
  # ä»£ç æ ¼å¼æ£€æŸ¥
  echo "ğŸ¨ Running linter..."
  npm run lint
  if [ $? -ne 0 ]; then
    echo "âŒ Linting failed. Push aborted."
    exit 1
  fi
  
  # TypeScriptç±»å‹æ£€æŸ¥
  echo "ğŸ”§ Running type check..."
  npm run type-check
  if [ $? -ne 0 ]; then
    echo "âŒ Type check failed. Push aborted."
    exit 1
  fi
  
  echo "âœ… All checks passed. Pushing..."
</example>

<example type="invalid">
  // Bad - ç›´æ¥æ¨é€åˆ°ä¸»åˆ†æ”¯
  git checkout main
  git add .
  git commit -m "fix bug"
  git push origin main  // è¿åäº†Code Reviewè§„åˆ™

  // Bad - ä½è´¨é‡çš„PRæè¿°
  ## Pull Request
  Title: "update code"
  Description: "fixed some stuff"
  // æ²¡æœ‰è¯¦ç»†è¯´æ˜ã€æ²¡æœ‰æµ‹è¯•ä¿¡æ¯ã€æ²¡æœ‰Reviewé‡ç‚¹

  // Bad - è·³è¿‡CIæ£€æŸ¥
  git commit -m "quick fix [skip ci]"  // è·³è¿‡äº†å¿…è¦çš„è‡ªåŠ¨åŒ–æ£€æŸ¥

  // Bad - è‡ªå·±æ‰¹å‡†è‡ªå·±çš„PR
  // ä½œä¸ºPRä½œè€…ï¼Œä¸åº”è¯¥æ‰¹å‡†è‡ªå·±çš„ä»£ç å˜æ›´

  // Bad - å¤§å‹PRæ²¡æœ‰æ‹†åˆ†
  // å•ä¸ªPRåŒ…å«ï¼š
  // - é‡æ„æ•´ä¸ªç”¨æˆ·ç³»ç»Ÿ
  // - æ·»åŠ æ–°çš„3DåŠŸèƒ½
  // - æ›´æ–°æµ‹è¯•æ¡†æ¶
  // - ä¿®æ”¹æ„å»ºé…ç½®
  // åº”è¯¥æ‹†åˆ†ä¸ºå¤šä¸ªå°çš„ã€å¯å®¡æŸ¥çš„PR

  // Bad - å¿½ç•¥Reviewè¯„è®º
  // Reviewer: "è¿™é‡Œçš„é”™è¯¯å¤„ç†é€»è¾‘æœ‰é—®é¢˜"
  // Author: (ç›´æ¥åˆå¹¶ï¼Œæ²¡æœ‰å›åº”æˆ–ä¿®å¤)

  // Bad - æ²¡æœ‰æµ‹è¯•çš„ä»£ç æäº¤
  const UserComponent = () => {
    // å¤æ‚çš„ä¸šåŠ¡é€»è¾‘
    const handleSubmit = async (data) => {
      // æ²¡æœ‰æµ‹è¯•è¦†ç›–çš„ä»£ç 
    };
    return <div>...</div>;
  };
  // æäº¤æ—¶æ²¡æœ‰å¯¹åº”çš„æµ‹è¯•æ–‡ä»¶

  // Bad - ä¸ç¬¦åˆè§„èŒƒçš„æäº¤
  // æ²¡æœ‰éµå¾ªï¼š
  // - TypeScriptç±»å‹å®‰å…¨
  // - Ant Designç»„ä»¶ä½¿ç”¨
  // - ReduxçŠ¶æ€ç®¡ç†
  // - ä¸šåŠ¡ä¸3Dä»£ç åˆ†ç¦»
  const BadComponent = () => {
    const [state, setState] = useState(); // æ²¡æœ‰ç±»å‹
    // ç›´æ¥åœ¨ç»„ä»¶ä¸­è°ƒç”¨API
    useEffect(() => {
      fetch('/api/data').then(res => setState(res));
    }, []);
    
    return <div style={{}}></div>; // æ²¡æœ‰ä½¿ç”¨Ant Design
  };

  // Bad - ç´§æ€¥ä¿®å¤ç»•è¿‡Review
  git commit -m "HOTFIX: critical bug"
  git push origin main --force  // å¼ºåˆ¶æ¨é€ç»•è¿‡ä¿æŠ¤è§„åˆ™

  // Bad - Reviewè´¨é‡å·®
  // Reviewerè¯„è®ºï¼š
  // "LGTM" (æ²¡æœ‰å®é™…æ£€æŸ¥ä»£ç )
  // "çœ‹èµ·æ¥ä¸é”™" (æ²¡æœ‰å…·ä½“åé¦ˆ)
  // åº”è¯¥æä¾›å…·ä½“ã€å»ºè®¾æ€§çš„åé¦ˆ
</example>
